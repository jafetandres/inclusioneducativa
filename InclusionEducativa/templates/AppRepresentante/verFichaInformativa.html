{% extends 'AppRepresentante/base.html' %}
{% block contenido %}
    <div class="card o-hidden border-0 shadow-lg my-5">
        <div class="card-body p-0">
            <div class="container-fluid">
                <div class="container-fluid">
                    <br>
                    <br>
                    <h1 class="h3 mb-2 text-gray-800 text-center">Datos Personales</h1>
                    <br>
                    <br>
                    <div class="form-group row">
                        <div class="col-sm-6 mb-3 mb-sm-0">
                            <label><b>Nombres:</b>
                                <p>
                                    {{ estudiante.nombres }}
                                </p>
                            </label>
                        </div>
                        <div class="col-sm-6">
                            <label><b>Apellidos:</b>
                                <p>
                                    {{ estudiante.apellidos }}
                                </p>
                            </label>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6 mb-3 mb-sm-0">
                            <label><b>Cedula:</b>
                                <p>
                                    {{ estudiante.cedula }}
                                </p>
                            </label>
                        </div>
                        <div class="col-sm-6">
                            <label><b>Fecha de Nacimiento:</b>
                                <p>
                                    {{ estudiante.fechaNacimiento }}
                                </p>
                            </label>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6 mb-3 mb-sm-0">
                            <label><b>Institucion:</b>
                                <p>
                                    {{ estudiante.institucion.nombre }}
                                </p>
                            </label>
                        </div>
                        <div class="col-sm-6">
                            <label><b>Nivel:</b>
                                <p>
                                    {{ estudiante.nivel }}
                                </p>
                            </label>
                        </div>
                    </div>
                </div>
                <h1 class="h3 mb-2 text-gray-800" align="center">Ficha Informativa realizada por el Representante</h1>
                <hr class="sidebar-divider my-0">
                <br>
                <label><b>Dificultad Prenatal:</b>
                    <p>
                        Respuesta: {{ fichaInformativaRepresentante.dificultad.respuesta_prenatal }} <br/>
                        Descripcion: {{ fichaInformativaRepresentante.dificultad.descripcion_prenatal }}
                    </p>
                </label>
                <br>
                <label><b>Dificultad Perinatal:</b>
                    <p>
                        Respuesta: {{ fichaInformativaRepresentante.dificultad.respuesta_perinatal }} <br/>
                        Descripcion: {{ fichaInformativaRepresentante.dificultad.descripcion_perinatal }}
                    </p>
                </label>
                <br>
                <label><b>Dificultad Postnatal:</b>
                    <p>
                        Respuesta: {{ fichaInformativaRepresentante.dificultad.respuesta_postnatal }} <br/>
                        Descripcion: {{ fichaInformativaRepresentante.dificultad.descripcion_postnatal }}
                    </p>
                </label>
                <br>
                <label><b>Tipo de Familia:</b>
                    <p>
                        {{ fichaInformativaRepresentante.tipoFamilia }}
                    </p>
                </label>
                <br>
                <label><b>Dinamica Familiar:</b>
                    <p>
                        {{ fichaInformativaRepresentante.dinamicaFamiliar }}
                    </p>
                </label>
                <br>
                <label><b>Antecedentes familiares patológicos significativos:</b>
                    <p>
                        {{ fichaInformativaRepresentante.antecedentesFPatologicos }}
                    </p>
                </label>
                <br>
                <label><b>Diagnóstico médico:</b>
                    <p>
                        Respuesta: {{ fichaInformativaRepresentante.diagnosticoMedico.diagnosticoMedicoRespuesta }}<br/>
                        Opcion: {{ fichaInformativaRepresentante.diagnosticoMedico.diagnosticoMedicoOpcion }}<br/>
                        Descripcion: {{ fichaInformativaRepresentante.diagnosticoMedico.diagnosticoMedicoDescripcion }}
                    </p>
                </label>
                <br>

                <label><b>Detalle de Dificultades:</b>
                    <p>
                        {{ fichaInformativaRepresentante.detalleDificultades }}<br/>
                    </p>
                </label>
            </div>
        </div>
    </div>
    <div class="card o-hidden border-0 shadow-lg my-5">
        <div class="card-body p-3">
            <div class="container-fluid">
                <div id="comentariosHechos" name="comentariosHechos">
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block js %}
    {{ block.super }}

    <script>
        $(document).ready(function () {
            function cargarComentarios() {
                $.ajax({
                    url: "{% url 'appdocente:comentarios' %}",
                    type: "get",
                    data: {
                        'id': {{ estudiante.id }}
                    },
                    success: function (data) {
                        if (data.length > 0) {
                            var html = "";
                            for (var i = 0; i < data.length; i++) {
                                html += '    <div class="card card-inner">\n' +
                                    '\n' +
                                    '                                <div class="card-body">\n' +
                                    '                                    <div class="row">\n' +
                                    '                                        <div class="col-md-2">\n' +
                                    '                                            <img src="https://image.ibb.co/jw55Ex/def_face.jpg"\n' +
                                    '                                                 class="img img-rounded img-fluid"/>\n' +
                                    '                                            <p class="text-secondary text-center">' + data[i].fields.fechaCreacion + '</p>\n' +
                                    '                                        </div>\n' +
                                    '                                        <div class="col-md-10">\n' +
                                    '                                            <p>\n' +
                                    '                                                <a href="https://maniruzzaman-akash.blogspot.com/p/contact.html"><strong>' + data[i].fields.usernameEmisor + '</strong></a>\n' +
                                    '                                            </p>\n' +
                                    '                                            <p>' + data[i].fields.contenido + '</p>\n' +
                                    '                                        </div>\n' +
                                    '                                    </div>\n' +
                                    '                                </div>\n' +
                                    '                            </div>\n  <br>\n' +
                                    '                            <br>';
                            }
                            $('#comentariosHechos').html(html);
                        } else {
                            $('#comentariosHechos').html('<h4 class="text-center p-5">No existen comentarios.</h4>');
                        }
                    },
                    error: function () {
                    }
                });
            }

            setInterval(cargarComentarios, 500);
        });
    </script>
{% endblock %}



